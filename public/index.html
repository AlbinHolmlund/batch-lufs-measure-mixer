<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#1A1E29" />
  <meta name="description" content="A tool for measuring LUFS of multiple audio files." />
  <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
  <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
  <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@6.6.6/css/flag-icons.min.css" />

  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="%PUBLIC_URL%/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="%PUBLIC_URL%/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="%PUBLIC_URL%/icons/favicon-16x16.png">
  <link rel="manifest" href="%PUBLIC_URL%/icons/site.webmanifest">

  <script>
    window.PUBLIC_URL = '%PUBLIC_URL%';
  </script>
  <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
  <title>Batch LUFS Measure Tool - skrap.info</title>

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />

  <style>
    html,
    body {
      background-color: #0a1929;
    }
  </style>

  <script src="%PUBLIC_URL%/AUdioContextMonkeyPatch.js"></script>

  <script type="text/javascript">
    (function (c, l, a, r, i, t, y) {
      c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
      t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
      y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
    })(window, document, "clarity", "script", "g8e7p6hihq");
  </script>
</head>

<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root"></div>
  <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->

  <div class="electron-updater" style="display: none;">
    <div class="update-available">
      <p>An update is available. Downloading...</p>
    </div>
    <div class="update-error">
      <p>An error occurred while checking for updates.</p>
    </div>
  </div>

  <style>
    .electron-updater {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: #1A1E29;
      color: #fff;
      padding: 1rem;
      text-align: center;
    }

    .update-available {
      display: none;
    }

    .update-error {
      display: none;
    }
  </style>

  <script>
    // If this is an electron app, listen to ipc messages
    if (window && window.process && window.process.type) {
      const { ipcRenderer } = window.require('electron');

      // Listen for the 'update-available' event
      ipcRenderer.on('update-available', () => {
        // Show a notification or message to the user that an update is available
        document.querySelector('.electron-updater').style.display = 'block';
      });

      // Listen for the 'update-downloaded' event
      ipcRenderer.on('update-downloaded', () => {
        // Show a notification or message to the user that the update is ready to be installed
        document.querySelector('.update-available').style.display = 'none';

        // You can prompt the user to restart the app to apply the update
        if (confirm('A new update is available. Do you want to restart the app to apply the update?')) {
          // Send a message to the main process to quit and install the update
          ipcRenderer.send('install-update');
        }
      });

      // Listen for the 'update-error' event
      ipcRenderer.on('update-error', (event, error) => {
        // Show a notification or message to the user that there was an error while checking for updates or downloading the update
        document.querySelector('.update-error').style.display = 'block';

        // Add error messaage
        document.querySelector('.update-error').innerHTML = `<p>An error occurred while checking for updates: ${error}</p>`;
      });
    }
  </script>
</body>

</html>